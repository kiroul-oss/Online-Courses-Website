(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{863:function(e,t,a){},864:function(e,t,a){},865:function(e,t,a){},880:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(12),r=a.n(c),i=a(861),l=a(19),s=["getStateProp"];function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var f=function(){var e=Object(l.a)("recipes"),t=e.getStateProp;return m(m({},u(e,s)),{},{getRecipes:function(){return t("data")},getAutonamiStatus:function(){return t("autonamiStatus")},getLoading:function(){return t("isLoading")},getAutomationCount:function(){return t("automationCount")}})},d=a(20),p=a(7),O=["fetch","setStateProp"];function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var y=function(){var e=Object(d.a)("recipes"),t=e.fetch,a=e.setStateProp;return j(j({},E(e,O)),{},{fetch:function(){t("GET",Object(p.f)("/woofunnels-admin/automation/recipes/"))},setAutomationCount:function(e){return a("automationCount",e)},setAutonamiStatus:function(e){return a("autonamiStatus",e)}})},N=a(33),g=a(5),h=a(3),_=a(10),k=a(6),S=a(15),A=a.n(S),P=(a(863),a(140)),C=function(e){var t=e.data,a=void 0===t?{}:t,c=a.nice_name,r=void 0===c?"":c,i=a.source,l=void 0===i?"":i;return Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(n.createElement)("div",{className:"bwf-node-icon icon-start"},Object(n.createElement)(_.a,{size:22,icon:"rocket"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(g.isEmpty)(l)?"":l),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(g.isEmpty)(r)?"":r)))),Object(n.createElement)(P.d,{type:"source",position:"bottom",isConnectable:!1}))},x=function(e){var t=e.data,a=void 0===t?{}:t,c=a.subject,r=void 0===c?"":c,i=a.nice_name,l=void 0===i?"":i,s=a.integration,o=void 0===s?"":s;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(P.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-action"},Object(n.createElement)(_.a,{size:22,icon:"charge"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step"),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Action")),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(g.isEmpty)(o)?"":o),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(g.isEmpty)(l)?"":l),!Object(g.isEmpty)(r)&&Object(n.createElement)("div",{className:"bwf-node-inner-label bwf-two-line-ellipse-text"},r)))))))),Object(n.createElement)(P.d,{type:"source",isConnectable:!1,position:"bottom"}))},D=function(e){var t=e.data,a=(void 0===t?{}:t).values,c=void 0===a?[]:a;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(P.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon"},Object(n.createElement)(_.a,{size:26,icon:"condition"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step"),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Conditional")),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(g.isEmpty)(c)?"No Condition Found":Object(n.createElement)(n.Fragment,null,c.map((function(e,t){return Object(n.createElement)(n.Fragment,null,0!==t&&Object(n.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(n.createElement)("span",{className:"bwf-divider"},"OR")),e.map((function(e,t){return Object(n.createElement)(n.Fragment,null,0!==t&&Object(n.createElement)("div",{className:"bwf-step-divider"},Object(n.createElement)("span",{className:"bwf-divider"},"AND")),Object(n.createElement)("div",{className:"bwf-step-content-content"},e))})))}))))))),Object(n.createElement)(P.d,{type:"source",position:"bottom",isConnectable:!1}))},I=function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(P.d,{type:"source",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-node-content bwf-end"},Object(n.createElement)("div",{className:"bwf-node-content-item"},"End Automation"))))},F=function(e){var t=e.data,a=void 0===t?{}:t,c=a.nice_name,r=void 0===c?"":c,i=a.source_name;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(P.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(n.createElement)(_.a,{size:26,icon:"goal"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(h.__)("Step","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(h.__)("Goal","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(g.isEmpty)(i)?"":i),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(g.isEmpty)(r)?"":r))))))),Object(n.createElement)(P.d,{type:"source",position:"bottom",isConnectable:!1}))},R={1:Object(h.__)("Delay for a specific period","wp-marketing-automations-crm"),2:Object(h.__)("Delay until a specific date and time","wp-marketing-automations-crm"),3:Object(h.__)("Delay until a custom field date","wp-marketing-automations-crm")},T=function(e){var t=e.data,a=e.id,c=t.type,r=void 0===c?1:c,i=t.value,l=void 0===i?"":i;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","node-id":a},Object(n.createElement)(P.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(n.createElement)(_.a,{size:28,icon:"time-left"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step"),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Delay")),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},R.hasOwnProperty(parseInt(r))?R[parseInt(r)]:""),Object(n.createElement)("div",{className:"bwf-node-content-label"},l))))))),Object(n.createElement)(P.d,{type:"source",position:"bottom",isConnectable:!1}))},z=function(e){return Object(n.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(n.createElement)(P.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(n.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?"No":"Yes"),Object(n.createElement)(P.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},L=function(e){var t=e.data,a=void 0===t?{}:t;return Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(n.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(n.createElement)(_.a,{size:26,icon:"exit"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(h.__)("Step","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(h.__)("Exit Automation","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"},a.hasOwnProperty("step_status")&&3===parseInt(a.step_status)&&Object(n.createElement)("div",{className:"bwf-node-stat deleted"},"Deleted")))),Object(n.createElement)(P.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},M=(a(864),a(363)),q=a.n(M),G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.type)return 200+t;var n=0;switch(e.type){case"start":n=a?90:60;break;case"end":n=30;break;case"exit":n=65;break;case"wait":n=a&&e.data&&e.data.sidebarValues?160:105;break;case"yesNoNode":n=a?50:20;break;case"benchmark":n=a&&e.data&&e.data.benchmark?165:120;break;case"action":var c=e.data&&e.data.selected?e.data.selected:"";n=""!==c?a?165:120:105;break;case"conditional":var r=Object(g.flatten)(e.data.values).length,i=r-1;n=r?32*r+29*i+75:150,a||(n-=30);break;default:n=200}return n+t},B=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new q.a.graphlib.Graph;return n.setDefaultEdgeLabel((function(){return{}})),n.setGraph({rankdir:"TB",ranksep:90,nodesep:100}),e.forEach((function(e){Object(P.j)(e)?n.setNode(e.id,{width:280,height:G(e,3,t)+a}):n.setEdge(e.source,e.target,{weight:"conditional"===e.type?2:5})})),q.a.layout(n),e.map((function(e){if(Object(P.j)(e)){var a=n.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var c=G(e,"conditional"===e.type?70:50,t);e.position={x:a.x-140+Math.random()/1e3,y:a.y-c/2}}return e}))};function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,c,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){l=!0,c=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var H=function(e){var t=e.recipeID,a=e.previewData,c={start:C,action:x,conditional:D,end:I,benchmark:F,wait:T,yesNoNode:z,exit:L},r=U(Object(n.useState)([]),2),i=r[0],l=r[1],s=Object(P.k)(),o=Object(P.m)().setCenter,m=Object(n.useRef)();return Object(n.useEffect)((function(){Object(g.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(m.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect(),l(a))}),[]),Object(n.useEffect)((function(){var e=0,t=0,a=s.getState().nodes;if(a.length&&m.current){var n=a[0];n.hasOwnProperty("__rf")?(e=n.__rf.position.x+140,t=n.__rf.position.y):(e=n.position.x+140,t=n.position.y),t=parseFloat(t)+.45*parseFloat(m.current.height),o(e,t,1)}}),[i]),Object(n.createElement)("div",{id:"bwf-single-automation-wrap",className:"bwf-automation-wrap",key:t},Object(n.createElement)(P.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:c,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:B(i,!1)},Object(n.createElement)(P.c,{showInteractive:!1}),Object(n.createElement)(P.a,null)))},Z=a(53);function J(e,t,a,n,c,r,i){try{var l=e[r](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,c)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,c,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){l=!0,c=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var W=function(e){var t=e.recipeData,a=e.onRequestClose,c=(e.isImporting,e.showPreviewOnly),r=V(Object(n.useState)(!0),2),i=r[0],l=r[1],s=V(Object(n.useState)({}),2),o=s[0],m=s[1],b=function(){var e,a=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,A()({path:Object(p.f)("/woofunnels-admin/automation/recipe/?recipe_slug=".concat(t.slug)),method:"GET"}).then((function(e){l(!1),200===e.code&&(Object(g.isEmpty)(e.result)||m(e.result))}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),l(!1),m(e.t0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,a=arguments;return new Promise((function(n,c){var r=e.apply(t,a);function i(e){J(r,n,c,i,l,"next",e)}function l(e){J(r,n,c,i,l,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){m({}),l(!0),Object(g.isEmpty)(t)||b()}),[t]),Object(n.createElement)(n.Fragment,null,!Object(g.isEmpty)(t)&&Object(n.createElement)(k.Modal,{title:"",onRequestClose:a,overlayClassName:"bwf-recipe-preview-overlay bwf-fullscreen-overlay",className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-recipe-preview-modal",shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-stretch-header-customer-journey"},Object(n.createElement)("div",{className:"bwf-wrapper"},Object(n.createElement)("div",{className:"bwf-left-section"},Object(n.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:a},Object(n.createElement)(_.a,{icon:c?"close":"arrow-left",size:c?16:20})),Object(n.createElement)("div",{className:"bwf-title bwf-h3"},t.hasOwnProperty("name")?t.name:""),t.hasPRO&&Object(n.createElement)("div",{className:"bwf-recipe-paid"},Object(n.createElement)("span",null,Object(h.__)("PRO")))),Object(n.createElement)("div",{className:"bwf-right-section"}))),Object(n.createElement)("div",{className:"bwf-recipe-preview-sidebar"},Object(n.createElement)("div",{className:"bwf-about-recipe"},Object(n.createElement)("div",{className:"bwf-recipe-title"},Object(h.__)("Description")),Object(n.createElement)("div",{className:"bwf-recipe-description"},t.description)),Object(n.createElement)("div",{className:"bwf-recipe-tags"},!Object(g.isEmpty)(t.tag)&&Object.values(t.tag).map((function(e,t){return Object(n.createElement)("span",{className:"bwf-recipe-tag",key:t},e)}))),o.hasOwnProperty("video")&&!Object(g.isEmpty)(o.video)&&Object(n.createElement)("div",{className:"bwf-recipe-video"},Object(n.createElement)("iframe",{src:o.video}))),i?Object(n.createElement)("div",{className:"bwf-preview-reactflow-loader"},Object(n.createElement)(Z.a,{size:"xxl"})):Object(n.createElement)(n.Fragment,null,o.hasOwnProperty("preview")&&!Object(g.isEmpty)(o.preview)?Object(n.createElement)(H,{recipeID:o.id,previewData:o.preview}):Object(n.createElement)("div",{className:"bwf-preview-reactflow-loader bwf-h2"},o.hasOwnProperty("message")?o.message:Object(h.__)("No Preview Data Found","wp-marketing-automations")))))},K=(a(865),a(9));function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,c,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){l=!0,c=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ee=function(e){var t=e.onRequestClose,a=e.recipeData,c=void 0===a?[]:a,i=e.recipeFilters,l=void 0===i?{}:i,s=e.previewData,o=void 0===s?{}:s,m=e.showPreviewOnly,b=e.onPreviewClose,u=void 0===b?g.noop:b,f=Q(Object(n.useState)(c),2),d=f[0],p=f[1],O=Q(Object(n.useState)(c),2),w=O[0],j=(O[1],Q(Object(n.useState)({}),2)),v=j[0],E=j[1],y=Q(Object(n.useState)(!1),2),N=y[0],S=(y[1],Q(Object(n.useState)(o||{}),2)),A=S[0],C=S[1],x=Q(Object(n.useState)("All"),2),D=x[0],I=x[1],F=Q(Object(n.useState)(""),2),R=F[0],T=F[1],z=l.groups,L=void 0===z?[]:z,M=l.subGroups,q=void 0===M?[]:M,G=Q(Object(n.useState)(""),2),B=G[0],U=G[1],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.includes(t)};Object(n.useEffect)((function(){T("")}),[D]),Object(n.useEffect)((function(){N||p(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=new RegExp(e.toLowerCase().trim(),"g"),n=t||w;return n.filter((function(e){return!(Object(g.isNull)(e.name.toLowerCase().match(a))||!(Object(g.isEmpty)(D)||"All"===D||e.hasOwnProperty("group")&&e.group.includes(D))||!(Object(g.isEmpty)(R)||e.hasOwnProperty("subgroup")&&$(e.subgroup,R)))}))}(B))}),[B,D,R]);return Object(n.createElement)(P.e,null,Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>.components-modal__screen-overlay{ animation : none ! important }</style>"}}),Object(n.createElement)(k.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-recipe-wrapper-modal",overlayClassName:"bwf-fullscreen-overlay",shouldCloseOnEsc:!1,onRequestClose:t},Object(n.createElement)("div",{className:"bwf-recipe-modal-header"},Object(n.createElement)("div",{onClick:t,className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(n.createElement)(_.a,{icon:"close",size:"16"})),Object(n.createElement)("div",{className:"bwf-recipe-modal-title"},Object(h.__)("Automation Recipes")),Object(n.createElement)("div",{className:"bwf-recipe-search-field"},Object(n.createElement)("span",{className:"bwf-search-bar-icon"},Object(n.createElement)(_.a,{icon:"search",size:15})),Object(n.createElement)(k.TextControl,{value:B,type:"search",placeholder:Object(h.__)("Search Templates"),autoComplete:"off",onChange:U,disabled:N}))),Object(n.createElement)("div",{className:"bwf-recipe-wrapper"},N?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-recipe-sidebar"},Object(n.createElement)("ul",null,[1,2,3,4,5,6].map((function(e,t){return Object(n.createElement)("li",{className:"bwf-recipe-filter-item bwf-active-filter",key:t})})))),Object(n.createElement)("div",{className:"bwf-recipe-item-wrapper"},Object(n.createElement)("div",{className:"bwf-recipe-group-wrap"},[1,2,3,4,5].map((function(e,t){return Object(n.createElement)("div",{className:"bwf-recipe-group",key:t},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}))),Object(n.createElement)("div",{className:"bwf-recipe-items"},Object(n.createElement)("div",{className:"bwf-recipe-item scratch-recipe",style:{border:"2px dashed #DEDFEA"},key:"scratch"},Object(n.createElement)(_.a,{icon:"plus",width:"30",height:"30",color:"#DEDFEA"}),Object(n.createElement)("h2",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(n.createElement)("div",{className:"bwf_clear_5"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(n.createElement)("p",null)),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(e,t){return Object(n.createElement)("div",{className:"bwf-recipe-item",key:t},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"bwf-recipe-title"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("span",{className:"bwf-recipe-tag"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-20"}))))}))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-recipe-sidebar"},Object(n.createElement)("ul",null,L.map((function(e,t){return Object(n.createElement)("li",{className:r()("bwf-recipe-filter-item",{"bwf-active-filter":D===e}),onClick:function(){D!==e&&I(e)},key:t},e)})))),Object(n.createElement)("div",{className:"bwf-recipe-item-wrapper"},q.hasOwnProperty(D)&&!Object(g.isEmpty)(q[D])&&Object(n.createElement)("div",{className:"bwf-recipe-group-wrap"},q[D].map((function(e,t){return Object(n.createElement)("div",{className:r()("bwf-recipe-group",{"bwf-active-group":R===e}),onClick:function(){T(e===R?"":e)},key:t},e)}))),Object(n.createElement)("div",{className:r()("bwf-recipe-items")},Object(g.isEmpty)(d)&&Object(n.createElement)("p",null,Object(h.__)("No Recipe Found")),d.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-recipe-item",onClick:function(){C(e)},key:t},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"bwf-recipe-title"},e.name),e.hasPRO&&Object(n.createElement)("div",{className:"bwf-recipe-paid"},Object(n.createElement)("span",null,Object(h.__)("PRO")))),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},e.description),Object(n.createElement)("div",{className:"bwf-recipe-tags"},!Object(g.isEmpty)(e.tag)&&Object.values(e.tag).map((function(e,t){return Object(n.createElement)("span",{className:r()("bwf-recipe-tag"),key:t},e)}))))}))))),Object(n.createElement)(W,{onRequestClose:function(){C({}),u(),Object(K.k)({},"/automations")},recipeData:A,isImporting:v,setIsImporting:E,showPreviewOnly:m}))))},te=function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-autom-info bwf-t-center"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"bwf-autom-desc"},Object(n.createElement)("div",{className:"wffn-is-placeholder full-strip"}))),Object(n.createElement)("div",{className:"bwf-autom-action-wrap is-loading"},Object(n.createElement)("span",{className:"bwf-brand-logo"}),Object(n.createElement)("div",{className:"bwf-autom-about-action"},Object(n.createElement)("div",{className:"bwf-autom-about-title"},Object(n.createElement)("div",{className:"wffn-is-placeholder full-strip"})),Object(n.createElement)("div",{className:"bwf-autom-about-desc"},Object(n.createElement)("div",{className:"wffn-is-placeholder full-strip"}))),Object(n.createElement)("div",{className:"wffn-is-placeholder",style:{width:"36px"}})))},ae=function(){return Object(n.createElement)("div",{className:"bwf-autom-wrap"},te(),Object(n.createElement)("div",{className:"bwf-autom-recipe-section"},Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-items"},Object(n.createElement)("div",{className:"bwf-recipe-item is-loading"},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"wffn-is-placeholder"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}))),Object(n.createElement)("div",{className:"bwf-recipe-item is-loading"},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"wffn-is-placeholder"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}))),Object(n.createElement)("div",{className:"bwf-recipe-item is-loading"},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"wffn-is-placeholder"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}))),Object(n.createElement)("div",{className:"bwf-recipe-item is-loading"},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"wffn-is-placeholder"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}))),Object(n.createElement)("div",{className:"bwf-recipe-item is-loading"},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"wffn-is-placeholder"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}))),Object(n.createElement)("div",{className:"bwf-recipe-item is-loading"},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"})),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(n.createElement)("div",{className:"wffn-is-placeholder"})),Object(n.createElement)("div",{className:"bwf-recipe-tags"},Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}),Object(n.createElement)("div",{className:"wffn-is-placeholder small-strip"}))))))},ne=a(66);function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),!0).forEach((function(t){ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,c,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){l=!0,c=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}window.wffn.automation_plugin_status;var oe={install:{title:Object(h.__)("Automate your Funnels with Autonami","funnel-builder"),description:Object(h.__)("Earn more from your funnels by using marketing automation. And bring users into the funnels & convert them into buyers again.","funnel-builder"),cta:Object(h.__)("Activate","funnel-builder"),loadingText:Object(h.__)("Activating","funnel-builder")},activate:{title:Object(h.__)("Automate your Funnels with Autonami","funnel-builder"),description:Object(h.__)("Earn more from your funnels by using marketing automation. And bring users into the funnels & convert them into buyers again.","funnel-builder"),cta:Object(h.__)("Activate","funnel-builder"),loadingText:Object(h.__)("Activating","funnel-builder")},activated:{title:Object(h.__)("Autonami Activated","funnel-builder"),description:Object(h.__)("Earn more from your funnels by using marketing automation. And bring users into the funnels & convert them into buyers again.","funnel-builder"),cta:Object(h.__)("Go to Automation","funnel-builder"),loadingText:""}};t.default=function(){var e,t=f(),a=t.getRecipes,c=t.getAutonamiStatus,l=t.getLoading,s=t.getAutomationCount,o=y(),m=o.fetch,b=o.setAutonamiStatus,u=o.setAutomationCount,d=Object(N.a)(),O=d.resetHeaderMenu,w=d.setPageHeader,j=d.setActiveMultiple,v=a(),E=Object(n.useContext)(p.a),S=v.data,P=void 0===S?[]:S,C=v.filters,x=void 0===C?{}:C,D=null!==(e=c())&&void 0!==e?e:"install",I=l(),F=le(Object(n.useState)(!1),2),R=F[0],T=F[1],z=le(Object(n.useState)(!1),2),L=z[0],M=z[1],q=le(Object(n.useState)(!1),2),G=q[0],B=q[1],U=le(Object(n.useState)({}),2),$=U[0],H=U[1],Z=s(),J=Object(ne.a)().updateStatus;Object(n.useEffect)((function(){Object(g.isEmpty)(P)&&"activated"!==D&&m(),O(),w("Automations"),j({leftNav:"automations",rightNav:""}),Z.success||"activated"!==D||Y(),Object(p.b)("Autonami Setup")}),[]);var V,Y=function(){u(re(re({},Z),{},{isLoading:!0})),A()({path:Object(p.f)("/woofunnels-admin/automation")}).then((function(e){200===e.code&&e.result&&u({count:e.result.count,version:-1!==e.result.version.indexOf(".beta")?e.result.version.slice(0,e.result.version.indexOf(".beta")):e.result.version,isLoading:!1,success:!0})})).catch((function(e){u(re(re({},Z),{},{isLoading:!1})),console.log("Error fetching automation count: ",e)}))};return I&&"activated"!==D?Object(n.createElement)(ae,null):Object(n.createElement)("div",{className:"bwf-autom-wrap"},Z.isLoading?te():Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-autom-info bwf-t-center"},Object(n.createElement)("div",{className:"bwf-autom-heading"},"install"!==D&&Object(n.createElement)(_.a,{icon:"circle-tick-1",size:24}),oe[D]&&oe[D].title),Object(n.createElement)("div",{className:"bwf-autom-desc"},oe[D]&&oe[D].description)),Object(n.createElement)("div",{className:"bwf-autom-action-wrap"},Object(n.createElement)("span",{className:"bwf-brand-logo"},Object(n.createElement)(_.a,{icon:"logo"})),Object(n.createElement)("div",{className:"bwf-autom-about-action"},Object(n.createElement)("div",{className:"bwf-autom-about-title"},(V=Object(h.__)("Install and Activate Autonami","funnel-builder"),"activated"===D&&(V=0!==parseInt(Z.count)?Object(h.__)("Currently you have ".concat(parseInt(Z.count)," automations active")):Object(h.__)("You have 0 automations active")),V)),"activated"!==D&&Object(n.createElement)("div",{className:"bwf-autom-about-desc"},Object(h.__)("By using automation create Abandoned Cart Recovery, Post Purchase Follow-Ups","funnel-builder"))),Object(n.createElement)(k.Button,{isPrimary:!0,onClick:function(){if("activated"!==D)try{if(R)return;T(!0),A()({path:Object(p.f)("woofunnels-admin/funnels/activate-plugin/?slug=wp-marketing-automations&init=wp-marketing-automations/wp-marketing-automations.php&status=".concat(D,"\n                    ")),method:"POST"}).then((function(e){e.success&&!0===e.success&&(b("activated"),Y(),E(e.message),Object(p.r)(E,5e3),J({automations:!0}))})).finally((function(){T(!1)}))}catch(e){console.log("Failed Automation Installtion",e)}else 0===parseInt(Z.count)&&Object(i.gte)(Z.version,"2.1.0")?window.location.href="admin.php?page=autonami&path=/automations/create":window.location.href="admin.php?page=autonami&path=/automations"},isBusy:R,className:"bwf-btn-large",disabled:R},R?oe[D].loadingText:oe[D].cta))),"activated"!==D&&Object(n.createElement)("div",{className:"bwf-autom-recipe-section"},Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-autom-recipe-title"},Object(h.__)("Automation Recipes","funnel-builder")),Object(n.createElement)("div",{className:"bwf-autom-recipe-desc"},Object(h.__)("We have our 30+ automation receipes top quick start your autmation funnels","funnel-builder"))),Object(n.createElement)(k.Button,{className:"bwf-button-link",onClick:function(){return M(!0)}},Object(h.__)("View All","funnel-builder"),Object(n.createElement)(_.a,{icon:"arrow-right",size:20,color:"#0073AA"}))),Object(n.createElement)("div",{className:"bwf-recipe-items"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];if(!Object(g.isEmpty)(P))for(var a=function(e){var a=P[e];t.push(Object(n.createElement)("div",{className:"bwf-recipe-item",onClick:function(){H(a),B(!0),Object(K.k)({},"/automations/recipe/".concat(a.slug))},key:e},Object(n.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(n.createElement)("div",{className:"bwf-recipe-title"},a.name)),Object(n.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},a.description),Object(n.createElement)("div",{className:"bwf-recipe-tags"},!Object(g.isEmpty)(a.tag)&&Object.values(a.tag).map((function(e,t){return Object(n.createElement)("span",{className:r()("bwf-recipe-tag"),key:t},e)})))))},c=0;c<=e;c++)a(c);return t}(5))),(L||G)&&Object(n.createElement)(ee,{onRequestClose:function(){M(!1),H({})},recipeData:P,onPreviewClose:function(){B(!1),H({})},showPreviewOnly:G,recipeFilters:x,previewData:$}))}}}]);