(window.webpackJsonp=window.webpackJsonp||[]).push([[6,27],{260:function(e,t,n){"use strict";var r=n(19),c=["getStateProp"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}t.a=function(){var e=Object(r.a)("settings"),t=e.getStateProp;return o(o({},i(e,c)),{},{data:t("data"),tabs:t("tabs"),isLoading:t("isLoading")})}},321:function(e,t,n){"use strict";var r=n(0),c=n(3),a=n(6),o=n(10);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t={title:Object(c.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(c.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(c.__)("Upgrade to PRO Now","funnel-builder"),proLink:window.wffn.pro_link,action:!1},n=e.onRequestClose,l=e.isOpen,u=e.children,s=void 0===u?null:u,f=e.modalContent?i(i({},t),e.modalContent):t;return l?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(r.createElement)(o.a,{icon:"lock",size:20}),f.title),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close"),onClick:n},Object(r.createElement)(o.a,{icon:"close",weight:"16",height:"16"}))),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof f.content?f.content.replace("{{feature_name}}",f.feature):f.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},f.demoLabel&&Object(r.createElement)(a.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},f.demoLabel),!f.demoLabel&&Object(r.createElement)(a.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},Object(c.__)("Cancel")),f.action?Object(r.createElement)(a.Button,{className:"components-button is-primary upgrade-btn",onClick:f.action},f.proLabel):Object(r.createElement)("a",{href:f.proLink,target:"_blank",rel:"noopener noreferrer",className:"components-button is-primary upgrade-btn"},f.proLabel)),s)):null};s.defaultProps={isOpen:!1,onRequestClose:function(){}},t.a=s},511:function(e,t,n){"use strict";var r=n(5),c=n(20),a=n(7),o=n(260),l=["fetch","setStateProp"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}t.a=function(){var e=Object(c.a)("settings"),t=e.fetch,n=e.setStateProp,i=f(e,l),s=Object(o.a)().data,p=void 0===s?{}:s,m=(p.woofunnels_general_settings&&p.woofunnels_general_settings.general||{}).fields,b=void 0===m?[]:m;return u(u({},i),{},{fetch:function(){t("GET",Object(a.f)("/woofunnels-admin/funnels/global-settings/"))},setSettingsData:function(e){return n("data",e)},updateLicense:function(e){b&&Object(r.isArray)(b)&&b.length&&(p.woofunnels_general_settings.general.fields=e,n("data",p))}})}},551:function(e,t,n){"use strict";var r=n(0),c=n(6),a=n(3),o=n(73),l=n(93);function i(e,t,n,r,c,a,o){try{var l=e[a](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,c)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=u(Object(r.useState)(""),2),n=t[0],s=t[1],f=u(Object(r.useState)({}),2),p=f[0],m=f[1],b=u(Object(r.useState)(""),2),d=b[0],O=b[1],j=e.onCloseModal,v=e.onComplete,y=e.isWorking,_=e.modalTitle,g=void 0===_?Object(a.__)("Add Funnel","funnel-builder"):_;Object(r.useEffect)((function(){m({})}),[]);var w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return s("Funnel title is required field"),e.abrupt("return");case 3:s(""),v&&v(d);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(e){i(a,r,c,o,l,"next",e)}function l(e){i(a,r,c,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(c.Modal,{title:g,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return j()},isDismissible:!0,shouldCloseOnClickOutside:!y,overlayClassName:"bwf-create-funnel-modal__overlay"},n&&Object(r.createElement)(c.Notice,{status:"error",onRemove:function(){return s("")}},n),p&&p.error||p&&p.success?p&&p.success&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(o.a,null),Object(r.createElement)("div",{className:"bwf-h1 bwf-my-10"},p.message)):p&&p.error&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(l.a,null),Object(r.createElement)("div",{className:"bwf-h1 bwf-my-10"},p.message)):"":Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&w()}},Object(r.createElement)(c.TextControl,{placeholder:Object(a.__)("Enter funnel name","funnel-builder"),label:Object(a.__)("Name","funnel-builder"),value:d,onChange:function(e){return O(e)},disabled:y}),Object(r.createElement)("div",{className:"bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(c.Button,{onClick:j,className:"bwf-modal-cancel-btn",disabled:y},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(c.Button,{isPrimary:!0,disabled:y,isBusy:y,onClick:w,name:"add-funnel"},Object(a.__)(y?"Importing":"Add","funnel-builder")))))}},660:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(131),a=n(5),o=n(3),l=n(665),i=(n(85),n(94)),u=n(54),s=n(7),f=n(9);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={optin:{inline:"Inline",popup:"Popup"},wc_checkout:{1:"One Step",2:"Two Step",3:"Three Step"}};t.default=function(e){var t=Object(i.a)(),n=t.getTemplates,p=t.getBuilders,b=(t.getFilters,t.getDefaultBuilder),O=t.templateLoading,j=t.getActiveBuilder,v=t.getActiveSubFilter,y=t.getActiveGroup,_=(Object(u.a)().setActiveSubFilter,e.onImportComplete),g=e.isStoreCheckout,w=void 0!==g&&g,h=e.scratchConfirmModalData,E=e.storeCheckoutId,k=e.isStoreChekoutExists,S=void 0!==k&&k,N=e.templateListNotice,C=e.showImportNotice,P=Object(f.i)().importType,T=n(),x=p(),I=JSON.parse(JSON.stringify(x)),A=b(),R=j(),D=O(),B=v(),F=Object(c.d)(),L=F.id,U=void 0===L?0:L,q=F.filter,M=void 0===q?"funnel":q,G=F.builder,z=F.templateId,W=F.step,J=w&&E?E:U,$=y(),V=J||Object(s.x)()?$:M,K={funnel:Object(o.__)("All","funnel-builder"),wc_checkout:Object(o.__)("Checkout","funnel-builder"),landing:Object(o.__)("Sales Funnels","funnel-builder"),optin:Object(o.__)("Lead Funnels","funnel-builder")};(J||S)&&delete K.wc_checkout,S&&(K.upsell&&delete K.upsell,J||(K.wc_checkout=Object(o.__)("Checkout","funnel-builder"))),Object(s.w)()||(K.upsell=Object(o.__)("One Click Upsell","funnel-builder")),I&&I.wc_checkout&&I.wc_checkout.customizer&&delete I.wc_checkout.customizer;var Y=function(){var e=G||A;return Object(a.isEmpty)(R)||(e=R),I&&I[V]&&!I[V][e]&&(e=I[V][A]?A:"elementor"),e},H=["1","2","3","inline","popup"],Q=function(e,t){return("wc_checkout"===t||"optin"===t)&&B&&H.includes(B)?T[t][R][e].group_type[B]:e},X=function(e,t,n){var r="";return"landing"===e?r="sp":"optin"===e?r="op":"optin_ty"===e?r="op-confirmed":"wc_checkout"===e?r="checkouts":"upsell"===e?r="offer":"wc_thankyou"===e&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Z=Object(s.x)()?"/store-checkout":J?"/funnels/".concat(J):"/templates";return Object(r.createElement)(l.a,{filters:d,templates:T,activeBuilder:Y(),templateCards:function(){if(Object(a.isEmpty)(T)||Object(a.isEmpty)([V]))return{};var e=Y(),t={};if("upsell"===V)t=T[V][e];else if("funnel"===V){var n=T[V][e];for(var r in n){var c,o=n[r];if(n[r].hasOwnProperty("group"))if(!(o.group.includes("sales")||o.group.includes("optin")||null!==(c=n[r])&&void 0!==c&&c.build_from_scratch))continue;t[r]=n[r]}}else for(var l in T.funnel[e]){var i=T.funnel[e][l];("landing"===V&&i.group.includes("sales")||"optin"===V&&i.group.includes("optin")||"wc_checkout"===V&&i.group.includes("wc_checkout"))&&(t[l]=i)}return t}(),editors:I,defaultBuilder:A,isTemplateLoading:D,activeTemplateGroup:V,templateGroup:K,previewData:function(){if(Object(a.isEmpty)(T))return{};var e={success:!0},t=[],n=[];try{var r=Y();if("upsell"===V){t=[];var c=r;for(var l in"oxy"===c&&(c="oxygen"),"customizer"===c&&(c="elementor"),T[V][r]){var i=T[V][r][l];if(!i.build_from_scratch){var u={};u.id=l,u.funnel=l,u.slug=l,u.name=i.name,u.thumbnail=i.thumbnail,u.template=z,u.pro=i.pro,u.preview="https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:l,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:z,thumbnail:z,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(T[V][r][z].prevslug,"/"),slug:z,prevId:z,name:T[V][r][z].name,pro:T[V][r][z].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(V){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=T.funnel[r][z];t=f.steps?f.steps.map((function(e){var t=T[e.type][r][Q(e.slug,e.type)],c="";switch(e.type){case"landing":c=Object(o.__)("Sales Page");break;case"wc_checkout":c=Object(o.__)("Checkout Page");break;case"upsell":c=Object(o.__)("One Click Upsell");break;case"wc_thankyou":c=Object(o.__)("Thank You Page");break;case"optin":c=Object(o.__)("Optin Page");break;case"optin_ty":c=Object(o.__)("Optin Confirmation Page")}t.group_type?Object.values(t.group_type).forEach((function(t){var c=T[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(c.prevslug),preview:X(e.type,c,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:X(e.type,t,r)});return{id:"".concat(e.type,"-").concat(z),slug:Q(e.slug,e.type),funnel:z,step:e.type,name:c,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:X(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var p=f?f.steps.filter((function(e){return e.type===W})):[],m=T[p[0].type][r][Q(p[0].slug,p[0].type)];e.activeTemplate={thumbnail:"".concat(W,"-").concat(z),prevId:"".concat(W,"-").concat(m.prevslug),preview:X(p[0].type,m,r),slug:z,name:T.funnel[r][z].name,pro:T.funnel[r][z].pro,tempPro:T.funnel[r][z].pro,group:"funnel",filters:!!m.group_type&&Object.keys(m.group_type),type:W,funnelGroup:f.group,filter:"wc_checkout"===W?m.no_steps:m.group?m.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:J,onImportComplete:_,templateFilterCheck:function(e){return!J||"funnel"===P||!1===B||!1===B||!(!J||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===B?"optin":B):B===e.group)},activeFilter:B,isStoreCheckout:w,parentRoute:Z,showTemplatesNav:!Object(s.x)(),showBuildFromScratch:"funnel"!==P||w&&!J,funnelTitleModalData:m({},w&&{title:"Store Checkout"}),scratchConfirmModalData:h,importApiPrefix:w?"store-checkout":"funnels",templateListNotice:N,showImportNotice:C})}},665:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ce}));var r=n(0),c=n(5),a=n(12),o=n.n(a),l=n(8),i=n.n(l),u=n(131),s=n(3),f=n(6),p=n(15),m=n.n(p),b=n(9),d=(n(834),n(53));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var c=k(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,a,l=w(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props.src;this.setState({isLoading:!1}),this.props.onLoad(!!e)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,a=e.src,l=e.title,i=this.state.isLoading,u=o()("wffn-web-preview",t,{"is-loading":i});return Object(r.createElement)("div",{className:u},(i||Object(c.isEmpty)(a))&&n,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:v({},Object(c.isEmpty)(a)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:l,src:a})))}}])&&_(t.prototype,n),a&&_(t,a),i}(r.Component);S.propTypes={className:i.a.string,loadingContent:i.a.node,onLoad:i.a.func,src:i.a.string.isRequired,title:i.a.string.isRequired},S.defaultProps={loadingContent:Object(r.createElement)(d.a,{size:"xxl"}),onLoad:c.noop};var N=S,C=n(321),P=n(10),T=n(81),x=n(63),I=n(54),A=n(94),R=(n(835),n(7)),D=(n(836),["src","onLoaded"]);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var q=function(e){var t=e.src,n=e.onLoaded,a=void 0===n?c.noop:n,o=U(e,D),l=F(Object(r.useState)(!1),2),i=l[0],u=l[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),a(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",B({src:t},o)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},M=n(17);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.wffn.pro_link;var Y=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},H=Y.logo?Y.logo:"";function Q(e){var t=e.isOpen,n=e.onRequestClose,a=(e.templateID,e.template),l=e.activeGroup,i=(e.importTemplate,e.activeEditor),p=e.importing,m=(e.templateList,e.templateGroup,e.filters),d=e.hasPRO,O=e.checkEditor,j=e.previewData,v=e.isTemplateLoading,y=e.activeFilter,_=e.setPreviewErr,g=e.parentRoute,w=e.funnelId,h=e.importType,E=Object(b.i)(),k=j(),S=k.thumbnails,D=k.activeTemplate,B=k.previews,F=void 0===B?[]:B,L=Object(u.d)().step,U=M.a.getFunnel(),G=!(!D||!D.type)&&D.type;Object(r.useEffect)((function(){w||(k.success?_(!1):!1===k.success&&_(!0))}),[k.success]),Object(r.useEffect)((function(){if(G)if("wc_checkout"===G||"optin"===G){var e=!(!D||!D.filters)&&D.filters[0];E.group&&("wc_checkout"===G&&["1","2","3"].includes(E.group)||"optin"===G&&["inline","popup"].includes(E.group))?W(E.group):(W(e),Object(b.k)({group:e}))}else E.group&&(delete E.group,Object(b.k)({},Object(b.g)(),E))}),[E.group,G]),Object(r.useEffect)((function(){!Object(c.isEmpty)(null==U?void 0:U.steps)&&"funnel"===h&&w&&Object(b.k)({},"/funnels/".concat(U.id))}),[U]);var W=Object(I.a)().setActiveSubFilter,V=(0,Object(A.a)().getCurrentTemplate)(),K=Object(I.a)().setCurrentTemplate,Y=$(Object(r.useState)(!1),2),Q=(Y[0],Y[1]),X=d("status"),Z="upsell"===l||w&&"step"===h?Object(s.__)("Import This Template"):Object(s.__)("Import This Funnel"),ee=$(Object(r.useState)("desktop"),2),te=ee[0],ne=ee[1],re=$(Object(r.useState)(!1),2),ce=re[0],ae=re[1],oe=$(Object(r.useState)(!1),2),le=oe[0],ie=oe[1],ue=$(Object(r.useState)(!w),2),se=ue[0],fe=ue[1],pe=$(Object(r.useState)([]),2),me=pe[0],be=pe[1];Object(r.useEffect)((function(){if(Q(!1),D&&!me.includes(D.prevId)){var e=JSON.parse(JSON.stringify(me));e.push(D.prevId),be(e)}}),[null==D?void 0:D.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(S&&!w&&se){var e=S||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&fe(!1)}}))}}),[S]);var de=("wc_checkout"===l||L&&"wc_checkout"===L)&&"1"!==y,Oe=("optin"===l||L&&"optin"===L)&&"inline"!==y;return k?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.Modal,{className:"wffn_template_preview_modal",onRequestClose:function(){return n(!1)},overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:H,alt:"Funnel Builder for WordPress",width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},null==D?void 0:D.name,"yes"===(null==D?void 0:D.pro)&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},"PRO"))),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:o()("wffn_viewport_icons",{active:"desktop"===te}),onClick:function(){return ne("desktop")},title:"Desktop Viewport"},Object(r.createElement)(P.a,{icon:"desktop",color:"desktop"===te&&"#fff"})),Object(r.createElement)("span",{className:o()("wffn_viewport_icons",{active:"tablet"===te}),onClick:function(){return ne("tablet")},title:"Tablet Viewport"},Object(r.createElement)(P.a,{icon:"tablet",color:"tablet"===te&&"#fff"})),Object(r.createElement)("span",{className:o()("wffn_viewport_icons",{active:"mobile"===te}),onClick:function(){return ne("mobile")},title:"Mobile Viewport"},Object(r.createElement)(P.a,{icon:"mobile",color:"mobile"===te&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(r.Fragment,null,!(d((null==D?void 0:D.pro)||"no")||!0!==X&&(de||Oe||"upsell"===L))||a&&!Object(c.isEmpty)(a.group)&&a.group.includes("wc_checkout")&&Object(R.s)()?Object(r.createElement)(f.Button,{className:"wffn-import-template-btn",isPrimary:!0,onClick:function(){O()},disabled:p&&p.group===l,isBusy:"funnel"===h&&w&&p&&p.group===l},"funnel"===h&&w&&p&&p.group===l?"Importing...":Z):Object(r.createElement)(f.Button,{className:"wffn-import-template-btn",isPrimary:!0,onClick:function(){!1===X&&"yes"!==(null==D?void 0:D.tempPro)&&(de||Oe||"upsell"===L)?ie(!0):ae(!0)}},Z))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(f.Button,{onClick:function(){w?Object(b.k)({},"".concat(g)):(Object(b.k)({},"".concat(g,"/").concat(l)),W(!1)),n()}},Object(r.createElement)(P.a,{icon:"close",size:"18"})))),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:o()("wffn_template_preview_inner wffn_funnel_preview")},function(){if(null!=D&&D.type){var e=m[null==D?void 0:D.type];if(void 0!==e&&!Object(c.isEmpty)(e)&&("wc_checkout"===D.type||"optin"===D.type)){var t=[],n=function(n){D.filters.includes(n)&&t.push(Object(r.createElement)("div",{className:o()("template-filter",{"active-filter":y==n}),onClick:function(){if(W(n),Object(b.k)({group:n}),w){var e=V.template,t=(e=void 0===e?{}:e).group_type;Object(c.isEmpty)(t)||K({id:t[n],template:{group_type:t}})}},key:n,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,e[n]),!("wc_checkout"===D.type&&Object(R.s)()&&!w&&D&&D.funnelGroup.includes("wc_checkout"))&&(d((null==D?void 0:D.tempPro)||"no")||["2","3"].includes(n)&&!0!==X||"popup"===n&&!0!==X)&&Object(r.createElement)(P.a,{icon:"lock",size:"18"})))};for(var a in e)n(a);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},Object(s.__)("Type"),":"),t))}}}(),!v&&function(){if("upsell"===l&&!0!==X)return Object(r.createElement)(T.a,{align:"left",content:"One Click Upsell is a pro feature. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([w?"Step":"Template","upsell",null==D?void 0:D.name,"Notice","Bar"])});switch(w?l:L){case"upsell":if(!0!==X)return Object(r.createElement)(T.a,{align:"left",content:"One Click Upsell is a pro feature. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([w?"Step":"Template","upsell",null==D?void 0:D.name,"Notice","Bar"])});break;case"wc_checkout":if((!Object(R.s)()||w||!D||!D.funnelGroup.includes("wc_checkout"))&&(d(null==D?void 0:D.pro)||["2","3"].includes(y)&&!0!==X)){var e="This template is part of the pro plan. To access it, consider upgrading.";return"2"===y?e="Two-Step Checkout is a pro feature. To access it, consider upgrading.":"3"===y&&(e="Three-Step Checkout is a pro feature. To access it, consider upgrading."),Object(r.createElement)(T.a,{align:"left",content:e,linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([w?"Step":"Template","Checkout",null==D?void 0:D.name,"Notice","Bar"])})}break;case"optin":if(d((null==D?void 0:D.pro)||"no")||"popup"===y&&!0!==X){var t="This template is part of the pro plan. To access it, consider upgrading.";return"popup"==y&&(t=Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin "),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},y),Object(s.__)(" is a pro feature. To access it, consider upgrading."))),Object(r.createElement)(T.a,{align:"left",content:t,linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([w?"Step":"Template","Optin",null==D?void 0:D.name,"Notice","Bar"])})}}var n=w?l:L;return("wc_checkout"===n||"wc_thankyou"===n)&&Object(R.s)()||"yes"!==(null==D?void 0:D.pro)||Object(R.w)()?"":Object(r.createElement)(T.a,{align:"left",content:"This template is part of the pro plan. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([w?"Step":"Template",w?l:L,null==D?void 0:D.name,"Notice","Bar"])})}(),Object(c.isEmpty)(F)||Object(c.isEmpty)(me)?"":F.map((function(e,t){var n=(null==e?void 0:e.preview)||"",c=(null==e?void 0:e.id)||"";return Object(r.createElement)(N,{key:t,className:o()("wffn_template_preview_frame",te,{"hide-preview":e.id!==D.prevId}),title:"Funnel Template",src:me.includes(c)?n:"",onLoad:function(e){if(Q(!0),e&&F[t+1]){var n=JSON.parse(JSON.stringify(me));n.push(F[t+1].id),be(n)}}})}))),Object(c.isEmpty)(S)||se?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},J(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},S&&S.map((function(e,t){return Object(r.createElement)("label",{key:t,className:o()("wffn_template_page_options",{active_preview:e.id==(null==D?void 0:D.thumbnail)}),onClick:function(){w&&"step"===h?(K({id:e.id,template:e}),Object(b.k)({},"".concat(g,"/templates/").concat(l,"/").concat(i,"/preview/").concat(e.funnel))):w&&"funnel"===h?Object(b.k)({},"".concat(g,"/templates/").concat(l,"/").concat(i,"/preview/").concat(e.funnel,"/").concat(e.step)):"upsell"===l?Object(b.k)({},"".concat(g,"/").concat(l,"/").concat(i,"/preview/").concat(e.funnel)):Object(b.k)({},"".concat(g,"/").concat(l,"/").concat(i,"/preview/").concat(e.funnel,"/").concat(e.step))}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},w?Object(r.createElement)(q,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name,!!w&&"yes"===e.pro&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro wffn-static-ribbon"},"PRO")))})))))),Object(r.createElement)(C.a,{isOpen:ce,onRequestClose:function(){return ae(!1)},modalContent:z(z({title:!1===X?Object(s.__)("".concat(null==D?void 0:D.name," is a PRO template"),"funnel-builder"):Object(s.__)("Unable to Import Template","funnel-builder"),content:!1===X?Object(r.createElement)(r.Fragment,null,Object(s.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(s.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(s.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)("inactive or has expired.","funnel-builder")),Object(s.__)(" To access the template library you need a valid license.","funnel-builder")),proLabel:!1===X?Object(s.__)("Upgrade to PRO Now","funnel-builder"):Object(s.__)("Activate License","funnel-builder")},!1!==X&&{action:function(){return Object(b.k)({},"/settings/")}}),{},{proLink:Object(R.o)([w?"Step":"Template",w?l:"upsell"===l?"upsell":L,null==D?void 0:D.name,"Upgrade","Modal"])})}),(d((null==D?void 0:D.pro)||"no")||"yes"!==(null==D?void 0:D.pro)&&(de||Oe||"upsell"===L))&&Object(r.createElement)(x.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},"Yor are using ",null==D?void 0:D.name," ","Funnel. In this funnel there are some pro features like ",Object(r.createElement)("mark",null,"Two Step")," and"," ",Object(r.createElement)("mark",null,"Three Step Checkout"),","," ",Object(r.createElement)("mark",null,"One Click Upsell"),","," ",Object(r.createElement)("mark",null,"Optin Popup"),"."),confirmButtonText:Object(s.__)("Upgrade to PRO","funnel-builder"),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===X?Object(b.k)({},"/settings/"):window.open(Object(R.o)([w?"Step":"Template",w?l:"upsell"===l?"upsell":L,null==D?void 0:D.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){"funnel"!==h&&O();var e="1";if("optin"===l||"optin"===L?(Object(b.k)({group:"inline"}),e="inline"):Object(b.k)({group:"1"}),w){var t=V.template,n=(t=void 0===t?{}:t).group_type;Object(c.isEmpty)(n)||K({id:n[e],template:{group_type:n}})}},onRequestClose:function(){ie(!1)},isOpen:le,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0})):""}n(75);function X(e){var t=e.importBuildFromScratch,n=e.getRibbonName,c=e.activeTemplateGroup,a=e.templateID,o=void 0===a?"scratch":a;return Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},"upsell"===c&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},n({pro:"yes"})),Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se",onClick:function(e){return t(o,e)}},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(P.a,{icon:"plus",width:"48",height:"48",color:"#000000"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)("span",{className:"wffn_import_text"},Object(s.__)("Start from scratch","funnel-builder"))))))))}n(837);var Z=n(38),ee=n(511),te=n(260),ne=n(60),re=n(16),ce=n(13),ae=n(551),oe=n(667);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t=e.onCloseModal,n=e.onComplete,c=e.isWorking,a=e.activeTemplateGroup,o=e.showCloneOption,l=e.templateGroup,i=le(Object(r.useState)(""),2),u=i[0],p=i[1],m=le(Object(r.useState)({}),2),b=(m[0],m[1]),d=le(Object(r.useState)(""),2),O=d[0],j=d[1],v=le(Object(r.useState)(null),2),y=v[0],_=v[1];Object(r.useEffect)((function(){b({})}),[]);var g=function(){O?(p(""),n(O,!(!y||!y.copyFrom)&&y.step)):p("Step name is required field")};return Object(r.createElement)(f.Modal,{title:Object(s.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!c,overlayClassName:"bwf-create-funnel-modal__overlay"},u&&Object(r.createElement)(f.Notice,{status:"error",onRemove:function(){return p("")}},u),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"===e.key&&g()},role:"main"},Object(r.createElement)(f.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Name","funnel-builder"),value:O,onChange:function(e){return j(e)},disabled:c}),o&&Object(r.createElement)(oe.a,{step:{type:"upsell"===a?"wc_upsells":a,title:l[a],is_substep:!1},onStepSelected:function(e){return _(e)}}),Object(r.createElement)("div",{className:"bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(f.Button,{onClick:t,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(f.Button,{isPrimary:!0,disabled:c,isBusy:c,onClick:g,name:"add-funnel"},Object(s.__)(c?"Importing":"Add","funnel-builder")))))};n(838);function se(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe=function(){return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)(ne.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},se(Array(5)).map((function(e,t){return Object(r.createElement)(ne.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),Object(r.createElement)(ne.a,{gap:6,justify:"flex-start"},se(Array(5)).map((function(e,t){return Object(r.createElement)(ne.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},se(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn-is-placeholder"})))})))))))},me=n(66),be=n(69);n(839);function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var je=function(e){var t=de(Object(r.useState)(!1),2),n=t[0],c=t[1],a=e.toolTipText,o=e.size,l=(e.iconColor,e.iconSize),i=void 0===l?20:l,u=e.position,s=(e.icon,e.abPos),p=void 0!==s&&s,m=e.visible,b=void 0===m||m,d={height:i+"px",width:i+"px"};return p&&(d.position="relative"),b?Object(r.createElement)("span",{onMouseEnter:function(){return c(!0)},onMouseLeave:function(e){e.preventDefault(),c(!1)},style:d,onClick:function(){return c(!1)}},e.children,n&&Object(r.createElement)(f.Popover,{position:u,noArrow:!1,className:"bwf-tooltip bwf-tooltip-sz-"+o,style:p?{position:"absolute"}:{}},a)):e.children},ve=["edit"];function ye(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function _e(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(e){var t=e.activeFilter,n=e.defaultBuilder,a=e.filters,l=e.editors,i=e.templates,p=e.isTemplateLoading,d=e.activeBuilder,O=e.activeTemplateGroup,j=e.templateGroup,v=void 0===j?[]:j,y=e.funnelId,_=void 0===y?0:y,g=e.showDefaultEditorNotice,w=void 0===g||g,h=e.templateCards,E=void 0===h?{}:h,k=e.previewData,S=e.onImportComplete,N=e.templateFilterCheck,P=e.showTemplatesNav,T=e.parentRoute,D=e.disabledNavs,B=void 0===D?[]:D,F=e.showBuildFromScratch,L=void 0===F||F,U=e.funnelTitleModalData,M=void 0===U?{}:U,G=e.scratchConfirmModalData,z=e.importApiPrefix,W=void 0===z?"funnels":z,J=e.templateListNotice,$=e.showImportNotice,V=void 0===$?"":$,K=Object(b.i)(),Y=Object(me.a)().updateStatus,H=(0,Object(be.a)().getStatus)(),oe=_,le=Object(r.useContext)(R.a),ie=Ee(Object(r.useState)(!1),2),se=ie[0],fe=ie[1],de=Ee(Object(r.useState)(!1),2),Oe=de[0],ge=de[1],ke=Object(I.a)(),Se=ke.fetch,Ne=ke.makeDefaultEditor,Ce=ke.setActiveBuilder,Pe=ke.setActiveGroup,Te=ke.setCurrentTemplate,xe=ke.setActiveStep,Ie=ke.setPageBuildersOptions,Ae=ke.setActiveSubFilter,Re=Object(A.a)(),De=Re.getCurrentTemplate,Be=Re.getPageBuildersOptions,Fe=Re.getPageBuildersTexts,Le=De(),Ue=Be(),qe=Fe(),Me=Object(u.d)(),Ge=Me.builder,ze=Me.templateId,We=Me.filter,Je=Object(b.i)().importType,$e="wc_checkout"===Je?"funnel":Je,Ve=Object(ee.a)().fetch,Ke=Object(te.a)().data,Ye=Object(Z.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(c.isEmpty)(E)&&Se(),Ve(),function(){le("")}}),[]),Object(R.b)("Import Funnel");var He=Ee(Object(r.useState)(!1),2),Qe=He[0],Xe=He[1],Ze=Ee(Object(r.useState)(!1),2),et=Ze[0],tt=Ze[1],nt=Ee(Object(r.useState)(!1),2),rt=nt[0],ct=nt[1],at=Ee(Object(r.useState)({}),2),ot=at[0],lt=at[1],it=Ee(Object(r.useState)({id:"",template:{}}),2),ut=it[0],st=it[1],ft=Ee(Object(r.useState)(!1),2),pt=ft[0],mt=ft[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){Ce(d)}),[O,a,l]),Object(r.useEffect)((function(){ze&&(Xe(!1),st({id:ze,template:{}}))}),[]),Object(r.useEffect)((function(){Oe&&(Object(b.k)({},"/templates"),le(Object(s.__)("Template not found for requested URL. Please select from the list.")),Object(R.r)(le,3e3))}),[Oe]);var bt=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},dt=function(e){if(n!==e){mt(!0);var t=function(e,t){var n={};return Object.values(e).forEach((function(e){var t=e.values;n=we(we({},t),n)})),n.default_selected_builder=t,n}(Ke.woofunnels_general_settings,e);try{m()({path:"woofunnels-admin/funnels/settings/woofunnels_general_settings",method:"POST",data:{settings:JSON.stringify(t)}}).then((function(t){t.success?Ne(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){mt(!1),Object(c.delay)(le,5e3,"")}))}catch(e){console.log(e),Object(c.delay)(le,5e3,""),mt(!1)}}},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate";try{lt((function(e){return we(we({},e),{},{disableConfirm:!0,confirmButtonText:"Activating",cancelButtonText:"",shouldCloseOnClickOutside:!1})})),m()({path:"woofunnels-admin/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n),method:"POST"}).then((function(e){!0===e.success&&("funnel"===$e&&_?vt(ut.id):fe(!0),lt({status:!1}),Ie(we(we({},Ue),{},he({},d,we(we({},Ue[d]),{},{"plugin-status":"activated"})))))})).catch((function(e){lt({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Ue[d];if("wp_editor"!==d&&"customizer"!==d&&t["plugin-status"]&&"activated"!==t["plugin-status"]){var n=qe[d],c=n.text;"gutenberg"===d&&e&&(c=Object(s.__)("To have the best experience in Gutenberg, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var a={status:!0,modalTitle:Object(s.__)("Import Template"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:c}}),closeIcon:!0};a.confirmButtonText=n.ButtonText,"yes"===n.show_cancel_btn&&(a.cancelButtonText="Cancel"),"gutenberg"===d&&e&&(a.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),lt(we(we({},a),{},{onConfirm:function(){if(n.builder_link&&"install"===t["plugin-status"]&&"yes"===n.noInstall)return window.open(n.builder_link,"_blank"),void lt({status:!1});"yes"!==n.show_cancel_btn&&lt({status:!1}),Ot(t.plugins[0].slug,t.plugins[0].init,t["plugin-status"],{modalContentProps:a})},onCancel:function(){"gutenberg"===d&&e&&fe(!0),lt({status:!1})}})),tt(!1)}else"funnel"===$e&&_&&!e?vt(ut.id):fe(!0)},vt=function(e,n,r){tt({id:e,group:O,filter:t});var a=!0,o=d;"upsell"===O&&"wp_editor"===d?o="custom":"wc_checkout"===O&&"wp_editor"===d?o="embed_forms":"wc_checkout"===O&&"customizer"===d&&(o="pre_built");try{var l=Object.create({});l.template=e,l.builder=o;var i=Object.create({}),u=Object.create({});if(oe&&"step"===$e){if(r){var f=r&&r.hasOwnProperty("key")?r.key:0;l.title=n,l.inherit_from=f,l.type=O,delete l.template,delete l.builder}else l.funnel_id=oe,l.type=O,l.title=n,l.template_type=t;!gt||u.is_upsells||H.is_upsells||"upsell"!==O||(u.is_upsells=!0),u.is_checkout||H.is_checkout||"wc_checkout"!==O||(u.is_checkout=!0)}else{k().thumbnails.forEach((function(e){i["upsell"===e.step?"wc_upsells":e.step]=e.slug,!gt||u.is_upsells||H.is_upsells||"upsell"!==e.step||(u.is_upsells=!0),u.is_checkout||H.is_checkout||"wc_checkout"!==e.step||(u.is_checkout=!0)})),l.steps=JSON.stringify(i),oe&&"funnel"===$e?l.funnel_id=Number(oe):l.title=n}var p=0!==oe&&"step"===$e?Object(R.f)("woofunnels-admin/funnels/".concat(oe,"/steps")):Object(R.f)("woofunnels-admin/".concat(W,"/import_template"));m()({method:"POST",data:l,path:p}).then((function(e){e.status&&!0===e.status?(Object(c.isEmpty)(H.funnels)?u.funnels=[e.funnel_id]:1===H.funnels.length&&(u.funnels=[].concat(_e(H.funnels),[e.funnel_id])),Y(u),a=!1,oe||(e.funnel_id?yt(e.funnel_id):lt({status:!0,modalTitle:Object(s.__)("Import Template"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==oe&&S&&("funnel"===$e&&Ye(!1),S(e))):(lt({status:!0,modalTitle:Object(s.__)("Import Template"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),fe(!1))})).catch((function(e){lt({status:!0,error:e.message||e.msg}),fe(!1)})).finally((function(){a&&tt(!1)}))}catch(e){tt(!1)}},yt=function e(t){try{m()({path:Object(R.f)("woofunnels-admin/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?S?(Xe(!1),S({funnel_id:t})):(delete K.group,Object(b.k)({},"/funnels/".concat(t),K)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},_t=function(e){var t=!1,n=!We||"wc_checkout"!==We&&"wc_thankyou"!==We||Object(R.w)()?!(!Object(R.u)()||!Object(R.v)())&&Object(R.v)():Object(R.s)()&&Object(R.v)("wc_checkout");return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},gt=_t("status"),wt=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(G&&!r)lt(we(we({},G),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return lt({status:!1})}}));else{if(et)return!1;"upsell"===O&&_t("yes")?ct(!0):(st({id:t,isBuildFromScratch:!0,template:{name:v[O]}}),V?V():jt(!0),oe&&Te({id:t}),oe||Ye(!0))}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch";return Object(r.createElement)(X,{importBuildFromScratch:wt,getRibbonName:bt,activeTemplateGroup:O,templateID:e})};return Object(r.createElement)(r.Fragment,null,p?Object(r.createElement)(pe,null):Object(r.createElement)("div",{className:"wffn_template_wrap"},P&&function(){var e={},t=window.location&&window.location.search?Object(ce.parse)(window.location.search.substring(1)):{},n=(t.edit,ye(t,ve));for(var a in v)"funnel"===$e&&"upsell"===a||(e[a]={},e[a].name=v[a],e[a].isExclusive="upsell"===a,e[a].link=decodeURIComponent(Object(b.f)({},"/templates/".concat(a),n)));var l=Object.keys(e),i=[];return["funnel","wc_checkout","landing","optin","upsell"].forEach((function(e){var t=l.indexOf(e);t>-1&&(i.push(e),l.splice(t,1))})),Object(c.isEmpty)(l)||(i=i.concat(l)),Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(ne.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},i.map((function(n,c){var a=n===O,l=B.find((function(e){return e.key===n}));return Object(r.createElement)(f.FlexItem,{key:"bwf-temp-nav-".concat(c)},0===_?Object(r.createElement)(re.a,{className:o()("bwf-template-nav-item",{"is-selected":t.path==="/templates/"+n||"/templates"===t.path&&"funnel"===n}),href:e[n].link},Object(r.createElement)("div",null,e[n].name),e[n].isExclusive&&Object(r.createElement)("div",{className:"bwf-template-nav-exclusive-badge"},"PRO STEP")):Object(r.createElement)(je,{toolTipText:l&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},l.message),visible:l||!1,size:366},Object(r.createElement)("div",{className:o()("bwf-template-nav-item",{"is-selected":a&&!l},{"is-disabled":l}),onClick:function(){l||Pe(n)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,e[n].name),!Object(R.w)()&&e[n].isExclusive&&Object(r.createElement)("div",{className:"bwf-template-nav-exclusive-badge"},"PRO"))))}))))}(),Object(r.createElement)("div",{id:"wffn_design_container"},Object(r.createElement)("div",{className:"wffn_tab_container"},Object(r.createElement)(ne.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector bwf-flex-wrap"},function(){var e=[],t=l[O],c=function(c){e.push(Object(r.createElement)(f.FlexItem,{key:c},Object(r.createElement)("label",null,Object(r.createElement)("input",{name:"",type:"radio",value:c,onChange:function(){var e;Ce(c),w&&(n===(e=c)||pt||le(Object(r.createElement)("div",null,Object(s.__)("Want to make this default page builder?","funnel-builder"),"",Object(r.createElement)(f.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){dt(e),Object(R.r)(le,100)}},Object(s.__)("Yes","funnel-builder")),Object(r.createElement)(f.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return Object(R.r)(le,0)}},Object(s.__)("No","funnel-builder")))))},checked:c===d&&"checked"}),Object(r.createElement)("span",{className:o()({"is-selected":c===d})},t[c]))))};for(var a in t)c(a);return e}()),J,Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:o()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!_})},function(){var e=[],t=function(t){var n=E[t];N(n,!!n.group_type&&Object.keys(n.group_type)[0])&&(!L&&n.build_from_scratch||e.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:t},n.build_from_scratch?ht(n.slug?n.slug:t):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===n.pro?Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},bt(n)):"",Object(r.createElement)("div",{className:n.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},n.thumbnail&&Object(r.createElement)(q,{src:n.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(f.Button,{onClick:function(e){Te({id:t,template:n}),n.group_type?Ae(Object.keys(n.group_type)[0]):0!==_&&"funnel"!==$e||"optin"!==O&&"wc_checkout"!==O||Ae("optin"===O?"inline":"wc_checkout"===O&&"1"),Xe(!0),st({id:t,template:n}),e.preventDefault(),"upsell"===O&&0===_?Object(b.k)({},"".concat(T,"/").concat(O,"/").concat(d,"/preview/").concat(t)):0===_?Object(b.k)({},"".concat(T,"/").concat(O,"/").concat(d,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===$e&&Object(b.k)({},"".concat(T,"/templates/").concat(O,"/").concat(d,"/preview/").concat(t,"/").concat(n.steps[0].type)),xe(n.steps[0].type)):Object(b.k)({},"".concat(T,"/templates/").concat(O,"/").concat(d,"/preview/").concat(t))},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn"},Object(s.__)("Preview","funnel-builder")))))),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},n.name)),Object(r.createElement)("div",{className:"wffn_template_meta_right"},n.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",n.steps.length,"funel-builder"),n.steps.length)):null))))))};for(var n in E)t(n);return"wp_editor"===d&&Object(c.isEmpty)(e)&&e.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},ht("upsell"===O?"wfocu-custom-empty":"wp_editor_1"))),e}())))),Object(r.createElement)(x.a,{className:"bwf-admin-modal-squeezy "+ot.className,isLoading:ot.loading,successMessage:ot.success,errorMessage:ot.error,isOpen:ot.status,autoHide:8e3,content:ot.content,confirmText:ot.confirmText,confirmButtonText:ot.confirmButtonText,cancelButtonText:ot.cancelButtonText,onConfirm:ot.onConfirm,onCancel:ot.onCancel,modalTitle:ot.modalTitle,disableConfirm:ot.disableConfirm,closeIcon:ot.closeIcon,onRequestClose:function(){return lt({status:!1})}}),Object(r.createElement)(C.a,{isOpen:rt,onRequestClose:function(){return ct(!1)},modalContent:we(we({title:!1===gt?Object(s.__)("Templates are a PRO Feature","funnel-builder"):Object(s.__)("Unable to Import Template","funnel-builder"),content:!1===gt?Object(r.createElement)(r.Fragment,null,Object(s.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(s.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(s.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)("inactive or has expired.","funnel-builder")),Object(s.__)(" To access the template library you need a valid license.","funnel-builder")),proLabel:!1===gt?Object(s.__)("Upgrade to PRO Now","funnel-builder"):Object(s.__)("Activate License","funnel-builder")},!1!==gt&&{action:function(){return Object(b.k)({},"/settings/")}}),{},{proLink:Object(R.o)([0===_||"funnel"===$e?"Template":"Step",O,"Build","From","Scratch","Upgrade","Modal"])})}),se&&(0===_?Object(r.createElement)(ae.a,{onCloseModal:function(){fe(!1)},isWorking:et,onComplete:function(e){ut.isBuildFromScratch?function(e){var n={funnel_name:e,template:"scratch"};Object(R.x)()&&(n.builder=d,n.default_step="yes",n.template=null==ut?void 0:ut.id),tt({id:"scratch",group:O,filter:t});try{m()({method:"POST",data:n,path:Object(R.f)("woofunnels-admin/".concat(W))}).then((function(e){if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id,n=Object.create({});Object(c.isEmpty)(H.funnels)?n.funnels=[t]:1===H.funnels.length&&(n.funnels=[].concat(_e(H.funnels),[t])),Y(n),"funnels"===W?(delete K.group,Object(b.k)({},"/funnels/".concat(t),K)):S({funnel_id:e.funnel.id})}else!1===e.status&&(lt({status:!0,modalTitle:Object(s.__)("Import Template"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),fe(!1),tt({}))}))}catch(e){}}(e):vt(ut.id,e)},modalTitle:M.title}):Object(r.createElement)(ue,{onCloseModal:function(){fe(!1)},isWorking:et,activeTemplateGroup:O,templateGroup:v,showCloneOption:ut.isBuildFromScratch,onComplete:function(e,t){vt(Le.id,e,t)}}))),(Ge||Qe)&&Object(r.createElement)(Q,{isOpen:Qe||Ge,onRequestClose:function(){Xe(!1),Ae(!1),K.group&&(delete K.group,Object(b.k)({},Object(b.g)(),K))},importTemplate:vt,templateGroup:v,activeGroup:O,templateID:ut.id,template:ut.template,activeEditor:d,importing:et,templateList:i,filters:a,templates:i,hasPRO:_t,checkEditor:V||jt,previewData:k,isTemplateLoading:p,activeFilter:t,setPreviewErr:ge,parentRoute:T,funnelId:_,importType:$e}))};Ne.prototype={filters:i.a.object.isRequired,templates:i.a.object.isRequired,editors:i.a.object.isRequired,defaultBuilder:i.a.object.isRequired,templateLoading:i.a.func.isRequired,activeTemplateGroup:i.a.string.isRequired,templateGroup:i.a.object.isRequired};var Ce=Ne},667:function(e,t,n){"use strict";var r=n(0),c=n(6),a=n(3),o=n(5),l=n(15),i=n.n(l),u=n(7),s=(n(833),n(8)),f=n.n(s);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.onSearch,n=e.isLoading,l=e.items,i=e.onItemClick,u=e.error,s=e.blurText,f=p(Object(r.useState)(""),2),m=f[0],b=f[1],d=p(Object(r.useState)(!1),2),O=d[0],j=d[1],v=Object(r.useRef)(null),y=s||"",_=Object(r.useRef)();return Object(r.useEffect)((function(){jQuery("body").on("click",(function(e){jQuery(_.current).find(e.target).length>0?j(!0):j(!1)}))}),[]),Object(r.createElement)("div",{className:"bwf-select-auto-box",ref:_},n&&Object(r.createElement)(c.Spinner,null),Object(r.createElement)(c.TextControl,{autoComplete:"off",value:O?m:y,onChange:function(e){return b(n=e),v.current&&clearTimeout(v.current),void(v.current=setTimeout((function(){return t(n)}),500));var n},placeholder:Object(a.__)("Type to search","funnel-builder")}),(!Object(o.isArray)(l)||!!u)&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(o.isArray)(l)&&l.length>0&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},Object(r.createElement)("ul",null,l.map((function(e){return Object(r.createElement)("li",{key:e.key},Object(r.createElement)("div",{onClick:function(t){return function(e,t){i(e),j(!1),t.preventDefault()}(e,t)}},e.value))})))))};b.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},b.propTypes={onSearch:f.a.func,isLoading:f.a.bool,items:f.a.arrayOf(f.a.shape({key:f.a.oneOfType([f.a.number,f.a.string]).isRequired,value:f.a.string.isRequired})),onItemClick:f.a.func,onChange:f.a.func,error:f.a.any};var d=b;function O(e,t,n,r,c,a,o){try{var l=e[a](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,c)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=j(Object(r.useState)(!1),2),n=t[0],l=t[1],s=e.step,f=s.type,p=s.title,m=s.is_substep,b=void 0!==m&&m,v=e.onStepSelected,y=j(Object(r.useState)(!1),2),_=y[0],g=y[1],w=j(Object(r.useState)([]),2),h=w[0],E=w[1],k=j(Object(r.useState)(!1),2),S=k[0],N=k[1],C=j(Object(r.useState)(null),2),P=C[0],T=C[1],x=S&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(c.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(a.__)("".concat(p," not found"),"funnel-builder")))),I=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(o.isEmpty)(t)){e.next=4;break}return N(!1),E([]),e.abrupt("return");case 4:return g(!0),e.prev=5,n=b&&!0===b?"&is_substep=true":"",e.next=9,i()({path:Object(u.f)("/woofunnels-admin/funnels/step/search/?s=".concat(t,"&type=").concat(f).concat(n))});case 9:r=e.sent,Object(o.isArray)(r)&&r.length>0?E(r):E([]),Object(o.isArray)(r)&&r.length>0?N(!1):N(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),E([]),N(!0);case 18:g(!1);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(e){O(a,r,c,o,l,"next",e)}function l(e){O(a,r,c,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),A=h.map((function(e){return{key:e.id,value:e.name}})),R=P&&P.hasOwnProperty("value")?Object(a.__)("Selected ".concat(p,": "),"funnel-builder")+P.value:"";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.CheckboxControl,{label:Object(a.__)(p?Object(o.capitalize)("Clone from another ".concat(p)).replace("pages","page"):"Clone from another step","funnel-builder"),value:n,checked:n,onChange:function(){l(!n),v({step:P,copyFrom:!n})}}),n&&Object(r.createElement)(d,{onSearch:function(e){return I(e)},isLoading:_,items:A,error:x,onItemClick:function(e){T(e),v({step:e,copyFrom:n})},blurText:R}))}},833:function(e,t,n){},834:function(e,t,n){},835:function(e,t,n){},836:function(e,t,n){},837:function(e,t,n){},838:function(e,t,n){},839:function(e,t,n){}}]);